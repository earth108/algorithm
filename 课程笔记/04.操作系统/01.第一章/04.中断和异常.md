#### 一.中断的作用

CPU会运行两种程序，一种**操作系统内核程序**，一种是**应用程序**

"中断"是让**os内核夺回CPU使用权**的唯一途径

---



#### 二.中断的类型

内中断（也称"异常"）：与当前执行的指令**有关**，中断信号来源于**CPU内部**

举例：

1.试图在用户态下执行特权指令。

2.终止， 执行除法指令时发现除数为0。

3.陷阱, 有时应用程序想请求OS内核服务，此时执行一条特殊指令--陷入指令，该指令会引发一个内部中断信号。

（执行‘陷入指令’，意味着应用程序主动将CPU控制权还给操作系统内核。"系统调用"就是通过陷入指令完成的）

-------=-------------=------

外中断：与当前执行的指令**无关**，中断信号来源于**CPU外部**

举例：

1.时钟中断--由时钟部件发来的中断信号。

（时钟部件：时钟部件每隔一个时间片（如50ms）会给CPU发送一个时钟中断信号）

2.I/O中断请求

-------=-------------=------

考试中，普遍称：内中断为**异常**，外中断为**中断**

内中断（异常）：

1.**陷阱**，陷入：由陷入指令引发，应用程序故意引发的

2.**故障**：由错误条件引起，可能被内核程序修复，内核程序修复故障后，会把CPU使用权还给应用程序，让他继续执行下去，如：缺页故障

3.**终止**：由致命错误引起，内核程序无法修复该错误，因此一般不再将CPU使用权还给引发终止的应用程序，而是直接终止该应用程序。如:整数除0、非法使用特权指令。

---



#### 三.中断机制的基本原理

**原理：**

不同的中断信号，需要用不同的中断处理程序来处理。当CPU检测到中断信号后，会根据中断信号的类型去查询“中断向量表”，以此来找到相应的中断处理程序在内存中的存放位置。
